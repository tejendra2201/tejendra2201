[To be covered in Lab]
Partitioning
Adding the Hard disk
Package installation/uinstallations
Various repository
DHCP practical
--------------------------------------------

[Lab Linux 4]

Description of fields in /etc/passwd 
------------------------------------
/etc/passwd has 7 fields
1 - username
2 - x //this is link to password file - /etc/shadow
3 - userid
4 - groupid
5 - comment
6 - home location
7 - shell that user will use 

[root@localhost editiss]# stat -c %a /etc/passwd
644
[root@localhost editiss]# stat -c %a /etc/shadow
0

[Task]
If I change the userid of a regular user to '0' - will it act like root?

To make the user disabled
-------------------------
[root@localhost editiss]# usermod -s '/sbin/nologin' sameer
[root@localhost editiss]# cat /etc/passwd | grep sameer
sameer:x:1006:1006::/home/sameer:/sbin/nologin
[root@localhost editiss]# su - sameer
Last login: Thu Oct 28 07:34:25 IST 2021 on pts/0
This account is currently not available.

Types of shells
---------------
sh and bash

cut
---
cut -d'<field separator>' -f<fieldnumber>

Give me the list of users (who are using bash shell) along with their  userids?
[root@localhost editiss]# cat /etc/passwd |grep bash | cut -d':' -f1,3
root:0
lavishjhamb:1000
riya:1003
mayur:1004
neha:1005
nikhil:1007
tom:1008

awk
--- 
awk -F'<field separator>' '{print $<field number>}'

if fieldnumber=0, it means wildcard i.e print all

//same ques as above using awk
[root@localhost editiss]# cat /etc/passwd | grep bash | awk -F':' '{print $1,$3}'
root 0
lavishjhamb 1000
riya 1003
mayur 1004
neha 1005
nikhil 1007
tom 1008

Ques - Fetch me the list of all users who user id is greater than 1000 - and display only the usernames and userids //Use awk

[root@localhost editiss]# cat /etc/passwd | awk -F':' '{if ($3 > 1000) print $1,$3}'
nfsnobody 65534
riya 1003
mayur 1004
neha 1005
sameer 1006
nikhil 1007
tom 1008

Q - Usage of 'chage' command.

Shell Scripting
---------------

Creation of shell script

#!/bin/bash  --> shebang //first line
<command1>
<command2>
.
.
.
Save the script
Give executable permissions to the script - chmod +x <scriptname>
Run the script - ./scriptname

Task1
Create 5 directories and 5 files
--
[root@localhost scripts]# cat task1.sh 
#!/bin/bash

#Create 5 directories and 5 files

mkdir dir{1..5}
touch file{1..5}
--

Task2 
Create 5 directories and 5 files
dir1 should contain file1
dir2 should contain file2
.
.
dir5 should contain file5
--
[root@localhost scripts]# cat task.sh
#!/bin/bash

for i in {1..5}
	do
		mkdir dir$i
		cd dir$i
		touch file$i
		cd ..
	done
--

Task3
Find me the list of users on Linux box whose userid is >= 1000 and display in the following format: username uid shell
--
[root@localhost scripts]# cat task2.sh
#!/bin/bash

#Find me the list of users on Linux box whose userid is >= 1000 and display in the following format: username uid shell

cat /etc/passwd | awk -F':' '{if ( $3 >= 1000 ) print $1,$3,$7}'
--

Taking the user inputs for scripting
------------------------------------
read command is used to take user inputs

Task4
Create a script that asks for a username and displays it's user id
--
[root@localhost scripts]# ./task4.sh 
Enter the username: tom
UserId for the tom is as follows:
1008
[root@localhost scripts]# cat task4.sh 
#!/bin/bash

#script should ask for a username and we need to provide the userid

read -p "Enter the username: " var

#we need show the userid for the user input

echo "UserId for the $var is as follows:"

cat /etc/passwd | grep "$var" | cut -d':' -f3
--

Storing the output of a command in some variable
------------------------------------------------
User defined variables

Syntax is : variablename=$(command)
--
[root@localhost scripts]# tomuid=$(cat /etc/passwd | grep tom | cut -d':' -f3)
[root@localhost scripts]# echo $tomuid
1008
--

Task5
Create a script that asks for a username and displays it's user id only if it is greater than 1002
--
[root@localhost scripts]# cat task5.sh 
#!/bin/bash

#script that asks for a username and displays it's user id only if it is greater than 1002

read -p "Enter the username: " usr

uid=$(cat /etc/passwd | grep "$usr" | awk -F':' '{print $3}')

if [[ $uid > 1002 ]]
	then
		echo "UID for $usr is: $uid"
	else
		echo "UID is less than 1002, hence not printing it"
fi
--

Task 6
Create a script that asks for a word
Create a directory with name as that of input
Inside that directory create the following:

dir1 --> file1 --> I'm file1
dir2 --> file2 --> I'm file2
.
.
dir1000 --> file1000 --> I'm file1000

Task 7
#Create a script that asks for a user name displays the user ID of the user provided as input.
#If the user does not exist, then display the following error: "Entered user is not present on you Linux machine"

===
For more practice and learning you can visit - https://ryanstutorials.net/bash-scripting-tutorial/
https://regexone.com/
===


















































